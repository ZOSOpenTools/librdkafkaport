diff --git a/src/rdkafka.c b/src/rdkafka.c
index 2a5e040b..5c23f023 100644
--- a/src/rdkafka.c
+++ b/src/rdkafka.c
@@ -38,7 +38,9 @@
 #include <sys/types.h>
 #include <dirent.h>
 #endif
-
+#ifdef _ZOS
+#include <strings.h>
+#endif
 #include "rdkafka_int.h"
 #include "rdkafka_msg.h"
 #include "rdkafka_broker.h"
@@ -1144,8 +1146,12 @@ static void rd_kafka_destroy_internal(rd_kafka_t *rk) {
         /* Trigger any state-change waiters (which should check the
          * terminate flag whenever they wake up). */
         rd_kafka_brokers_broadcast_state_change(rk);
+#ifdef _ZOS
+        if (rk->rk_background.thread.__) {
+#else
 
         if (rk->rk_background.thread) {
+#endif
                 int res;
                 /* Send op to trigger queue/io wake-up.
                  * The op itself is (likely) ignored by the receiver. */
@@ -2608,7 +2614,11 @@ fail:
         if (rk->rk_conf.sasl.provider)
                 rd_kafka_sasl_term(rk);
 
+#ifdef _ZOS
+        if (rk->rk_background.thread.__) {
+#else
         if (rk->rk_background.thread) {
+#endif
                 int res;
                 thrd_join(rk->rk_background.thread, &res);
                 rd_kafka_q_destroy_owner(rk->rk_background.q);
@@ -4993,7 +5003,7 @@ rd_bool_t rd_kafka_dir_is_empty(const char *path) {
 #else
         DIR *dir;
         struct dirent *d;
-#if defined(__sun)
+#if defined(__sun) || defined(_ZOS)
         struct stat st;
         int ret = 0;
 #endif
@@ -5007,7 +5017,7 @@ rd_bool_t rd_kafka_dir_is_empty(const char *path) {
                 if (!strcmp(d->d_name, ".") || !strcmp(d->d_name, ".."))
                         continue;
 
-#if defined(__sun)
+#if defined(__sun) || defined(_ZOS)
                 ret = stat(d->d_name, &st);
                 if (ret != 0) {
                         return rd_true;  // Can't be accessed
